<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Opening BeamHub...</title>
  <script>
    window.onload = () => {
      const ua = navigator.userAgent || "";
      const isAndroid = /Android/i.test(ua);
      const isiOS = /iPhone|iPad|iPod/i.test(ua);
      const isWebView = /\bwv\b/.test(ua) || (isiOS && /AppleWebKit(?!.*Safari)/i.test(ua));

      const deepLink = "beamhub://hello";
      const playStore = "https://play.google.com/store/apps/details?id=com.beamhub"; // update ID
      const appStore = "https://apps.apple.com/app/id000000000"; // update ID

      // ðŸ–¥ï¸ Desktop â†’ close the tab cleanly
      if (!isAndroid && !isiOS) {
        window.open("", "_self");
        window.close();
        return;
      }

      // ðŸ“± Inside in-app WebView
      if (isWebView) {
        window.location.href = deepLink;
        return;
      }

      // ðŸ¤– Android Chrome: use intent:// to force launch app
      if (isAndroid) {
        const intentUrl = "intent://hello#Intent;scheme=beamhub;package=com.beamhub;S.browser_fallback_url=" + encodeURIComponent(playStore) + ";end";
        window.location.href = intentUrl;
        return;
      }

      // ðŸŽ iOS Safari
      if (isiOS) {
        const timeout = setTimeout(() => {
          window.location.href = appStore;
        }, 1200);
        window.location.href = deepLink;
        window.addEventListener("pagehide", () => clearTimeout(timeout));
      }
    };
  </script>
</head>
<body></body>
</html>
