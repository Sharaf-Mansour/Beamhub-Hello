<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Opening Beamhub...</title>
  <script>
    window.onload = () => {
      const deepLink = "beamhub://hello";
      const apkUrl = "https://yourdomain.com/app/beamhub-latest.apk"; // change to your actual APK link
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;

      const isAndroid = /Android/i.test(userAgent);
      const isIOS = /iPhone|iPad|iPod/i.test(userAgent);
      const isWebView = /\bwv\b/.test(userAgent) || /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(userAgent);

      if (isWebView) {
        // Inside the appâ€™s own WebView
        window.location.href = deepLink;
        return;
      }

      if (isAndroid) {
        // Use Android intent for better reliability
        const intentUrl = `intent://hello#Intent;scheme=beamhub;package=com.beamhub.app;S.browser_fallback_url=${encodeURIComponent(apkUrl)};end`;
        window.location.href = intentUrl;

        // Backup fallback if intent fails silently
        setTimeout(() => {
          window.location.href = apkUrl;
        }, 1500);
        return;
      }

      if (isIOS) {
        // For iOS just try the deep link
        window.location.href = deepLink;
        // Optional: fallback to an info page or placeholder
        setTimeout(() => {
          document.body.innerHTML = `
            <h2 style="text-align:center;margin-top:30vh;">Beamhub app not installed.</h2>
            <p style="text-align:center;">Please install it manually.</p>`;
        }, 1200);
        return;
      }

      // Desktop or unknown
      document.body.innerHTML = `
        <h2 style="text-align:center;margin-top:30vh;">This link is for mobile only.</h2>`;
    };
  </script>
</head>
<body>
</body>
</html>
