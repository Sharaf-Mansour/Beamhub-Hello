<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Opening App...</title>
  <script>
    function isMobile() {
      return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    function isWebView() {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const androidWebView = /\bwv\b/.test(ua);
      const iosWebView = (/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i).test(ua);
      return androidWebView || iosWebView;
    }

    window.onload = () => {
      const deepLink = "beamhub://hello";
      const fallbackURL = "https://play.google.com/store/apps/details?id=com.beamhub"; // <-- CHANGE THIS

      const ua = navigator.userAgent;

      // ✅ Do nothing at all on desktop
      if (!/Android|iPhone|iPad|iPod/i.test(ua)) return;

      if (isWebView()) {
        // ✅ Works inside your app's WebView
        window.location.href = deepLink;
        return;
      }

      if (/Android/i.test(ua)) {
        // ✅ On Android Chrome: try opening app, else open Play Store
        const timeout = setTimeout(() => {
          window.location.href = fallbackURL;
        }, 1200);
        window.location.href = deepLink;

        // if the app opens, Chrome loses focus → clear the timeout
        window.addEventListener("pagehide", () => clearTimeout(timeout));
      } else if (/iPhone|iPad|iPod/i.test(ua)) {
        // ✅ On iOS Safari
        const timeout = setTimeout(() => {
          window.location.href = "https://apps.apple.com/app/id000000000"; // <-- CHANGE THIS
        }, 1200);
        window.location.href = deepLink;
        window.addEventListener("pagehide", () => clearTimeout(timeout));
      }
    };
  </script>
</head>
<body></body>
</html>
